{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\gmahr\\\\OneDrive\\\\Dokumente\\\\GitHub\\\\todoogle\\\\LoginTest\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { FullCalendarModule } from \"@fullcalendar/angular\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { AppComponent } from \"../app.component\";\nimport { CalendarviewComponent } from \"../calendarview/calendarview.component\";\nimport { ListviewComponent } from \"../listview/listview.component\";\nimport { AllTodosComponent } from \"../all-todos/all-todos.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nfunction GoogleCalendarIntegrationComponent_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function GoogleCalendarIntegrationComponent_button_0_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.handleSignoutClick();\n    });\n    i0.ɵɵtext(1, \"Sign Out\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GoogleCalendarIntegrationComponent_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function GoogleCalendarIntegrationComponent_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.handleAuthClick();\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 4);\n    i0.ɵɵelement(2, \"path\", 5)(3, \"path\", 6)(4, \"path\", 7)(5, \"path\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" Sign in with Google\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nFullCalendarModule.registerPlugins([dayGridPlugin, interactionPlugin]);\nexport class GoogleCalendarIntegrationComponent {\n  //todos: any[] = this.listUpcomingEvents(); //!!\n  //calendarId: String;\n  constructor(zone) {\n    this.zone = zone;\n    this.isSignedIn = false;\n    this.pre = '';\n  }\n\n  initClient() {\n    const updateSigninStatus = this.updateSigninStatus.bind(this);\n    gapi.client.init({\n      apiKey: 'AIzaSyAp_Insk0JjH4oxZ4I0-PLIydIno9jZEZ8',\n      clientId: '507232289390-bbo3sbk9t7op0utpakhfc8juman0g025.apps.googleusercontent.com',\n      discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'],\n      scope: 'https://www.googleapis.com/auth/calendar'\n    }).then(() => {\n      this.zone.run(() => {\n        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\n        updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n      });\n    });\n    this.listUpcomingEvents();\n    /*this.calendarId = gapi.client['calendar'].calendarId;\r\n    this.appendPre(this.calendarId);*/\n  }\n\n  updateSigninStatus(isSignedIn) {\n    console.log('updateSigninStatus', isSignedIn);\n    this.isSignedIn = isSignedIn;\n    AppComponent.isSignedIn = isSignedIn;\n\n    if (isSignedIn) {\n      this.listUpcomingEvents();\n      this.getEvent();\n    }\n\n    this.listUpcomingEvents();\n  }\n\n  handleAuthClick() {\n    gapi.auth2.getAuthInstance().signIn();\n  }\n\n  handleSignoutClick() {\n    gapi.auth2.getAuthInstance().signOut();\n  }\n\n  static addEvent(id, title, description, startDate, dueDate) {\n    startDate = startDate.toString() + ':00+02:00';\n    dueDate = dueDate.toString() + ':00+02:00';\n    let event = {\n      id: id,\n      summary: title,\n      description: description,\n      start: {\n        dateTime: startDate,\n        timeZone: 'Europe/Vienna'\n      },\n      end: {\n        dateTime: dueDate,\n        timeZone: 'Europe/Vienna'\n      }\n    };\n    let request = gapi.client['calendar'].events.insert({\n      calendarId: 'primary',\n      resource: event\n    });\n    request.execute(function (event) {});\n  }\n\n  static deleteEvent(id) {\n    let request = gapi.client['calendar'].events.delete({\n      calendarId: 'primary',\n      eventId: id\n    });\n    request.execute(function () {});\n  }\n  /*sollte static sein*/\n\n\n  getEvent() {\n    const appendPre = this.appendPre.bind(this);\n    gapi.client['calendar'].events.get({\n      calendarId: 'primary',\n      eventId: 'nm57o369d553qvo1p09dh3k1e0'\n    }).then(response => {\n      this.zone.run(() => {\n        let e = response.result;\n        appendPre(e.summary);\n      });\n    });\n  } // editEvent() {\n  //   let event: calendar_v3.Schema$Event = gapi.client['calendar'].events.get({\n  //     calendarId: 'primary',\n  //     eventId: 'u9obmihs83jf0dfb5iot0j2cf0'\n  //   })\n  //\n  //   let request = gapi.client['calendar'].events.update({\n  //     calendarId: 'primary',\n  //     eventId: 'u9obmihs83jf0dfb5iot0j2cf0',\n  //     summary: 'new edit test'\n  //   })\n  //\n  //   request.execute(function() {\n  //   });\n  // }\n\n\n  listUpcomingEvents() {\n    let events;\n    const appendPre = this.appendPre.bind(this);\n    gapi.client['calendar'].events.list({\n      calendarId: 'primary',\n      showDeleted: false,\n      singleEvents: true,\n      orderBy: 'startTime'\n    }).then(response => {\n      this.zone.run(() => {\n        events = response.result.items; //appendPre('Upcoming events:');\n\n        if (events.length > 0) {\n          for (const event of events) {\n            CalendarviewComponent.addEvent(event.id, event.summary, event.start.dateTime, event.end.dateTime);\n            ListviewComponent.addEvent(event.id, event.summary, event.start.dateTime, event.end.dateTime);\n            AllTodosComponent.addEvent(event.id, event.summary, event.start.dateTime, event.end.dateTime);\n            let when = event.start.dateTime;\n\n            if (!when) {\n              when = event.start.date;\n            } //appendPre(event.summary + ' (' + when + ')' + event.end.dateTime);\n\n          }\n        } else {//appendPre('No upcoming events found.');\n        }\n      });\n    });\n  }\n\n  appendPre(text) {\n    this.pre += text + '\\n';\n  }\n\n  loadGapi() {\n    const script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/api.js';\n    window.document.body.appendChild(script);\n    return new Promise((resolve, reject) => {\n      script.addEventListener('error', error => reject(error));\n      script.addEventListener('load', () => resolve());\n    });\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.loadGapi();\n      gapi.load('client:auth2', _this.initClient.bind(_this));\n    })();\n  }\n\n}\n\nGoogleCalendarIntegrationComponent.ɵfac = function GoogleCalendarIntegrationComponent_Factory(t) {\n  return new (t || GoogleCalendarIntegrationComponent)(i0.ɵɵdirectiveInject(i0.NgZone));\n};\n\nGoogleCalendarIntegrationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GoogleCalendarIntegrationComponent,\n  selectors: [[\"app-google-calendar-integration\"]],\n  decls: 4,\n  vars: 3,\n  consts: [[3, \"click\", 4, \"ngIf\"], [\"style\", \"margin-top: 500px; \", 3, \"click\", 4, \"ngIf\"], [3, \"click\"], [2, \"margin-top\", \"500px\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"x\", \"0px\", \"y\", \"0px\", \"width\", \"25\", \"height\", \"25\", \"viewBox\", \"0 0 48 48\", 2, \"fill\", \"#000000\"], [\"fill\", \"#FFC107\", \"d\", \"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z\"], [\"fill\", \"#FF3D00\", \"d\", \"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z\"], [\"fill\", \"#4CAF50\", \"d\", \"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z\"], [\"fill\", \"#1976D2\", \"d\", \"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z\"]],\n  template: function GoogleCalendarIntegrationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, GoogleCalendarIntegrationComponent_button_0_Template, 2, 0, \"button\", 0);\n      i0.ɵɵtemplate(1, GoogleCalendarIntegrationComponent_button_1_Template, 7, 0, \"button\", 1);\n      i0.ɵɵelementStart(2, \"pre\");\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isSignedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isSignedIn);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\", ctx.pre, \" \");\n    }\n  },\n  directives: [i1.NgIf],\n  styles: [\"button[_ngcontent-%COMP%] {\\n  padding: 4px 10px;\\n  margin: 5px;\\n  border: 2px;\\n  border-radius: 4px;\\n}\\n\\ndiv[_ngcontent-%COMP%] {\\n  margin: auto;\\n  width: 50%;\\n  align-content: center;\\n}\\n\\nfull-calendar[_ngcontent-%COMP%] {\\n  background-color: white;\\n  padding: 10px 20px;\\n  border-radius: 10px;\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvb2dsZS1jYWxlbmRhci1pbnRlZ3JhdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtBQUNGOztBQUVBO0VBQ0UsWUFBQTtFQUNBLFVBQUE7RUFDQSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UsdUJBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EscUJBQUE7QUFDRiIsImZpbGUiOiJnb29nbGUtY2FsZW5kYXItaW50ZWdyYXRpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b24ge1xyXG4gIHBhZGRpbmc6IDRweCAxMHB4O1xyXG4gIG1hcmdpbjogNXB4O1xyXG4gIGJvcmRlcjogMnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxufVxyXG5cclxuZGl2IHtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgd2lkdGg6IDUwJTtcclxuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbmZ1bGwtY2FsZW5kYXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5cclxuXHJcbiJdfQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/gmahr/OneDrive/Dokumente/GitHub/todoogle/LoginTest/src/app/google-calendar-integration/google-calendar-integration.component.ts"],"names":["FullCalendarModule","dayGridPlugin","interactionPlugin","AppComponent","CalendarviewComponent","ListviewComponent","AllTodosComponent","i0","i1","GoogleCalendarIntegrationComponent_button_0_Template","rf","ctx","_r3","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","GoogleCalendarIntegrationComponent_button_0_Template_button_click_0_listener","ɵɵrestoreView","ctx_r2","ɵɵnextContext","handleSignoutClick","ɵɵtext","ɵɵelementEnd","GoogleCalendarIntegrationComponent_button_1_Template","_r5","GoogleCalendarIntegrationComponent_button_1_Template_button_click_0_listener","ctx_r4","handleAuthClick","ɵɵnamespaceSVG","ɵɵelement","registerPlugins","GoogleCalendarIntegrationComponent","constructor","zone","isSignedIn","pre","initClient","updateSigninStatus","bind","gapi","client","init","apiKey","clientId","discoveryDocs","scope","then","run","auth2","getAuthInstance","listen","get","listUpcomingEvents","console","log","getEvent","signIn","signOut","addEvent","id","title","description","startDate","dueDate","toString","event","summary","start","dateTime","timeZone","end","request","events","insert","calendarId","resource","execute","deleteEvent","delete","eventId","appendPre","response","e","result","list","showDeleted","singleEvents","orderBy","items","length","when","date","text","loadGapi","script","document","createElement","src","window","body","appendChild","Promise","resolve","reject","addEventListener","error","ngOnInit","load","ɵfac","GoogleCalendarIntegrationComponent_Factory","t","ɵɵdirectiveInject","NgZone","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","GoogleCalendarIntegrationComponent_Template","ɵɵtemplate","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate1","directives","NgIf","styles"],"mappings":"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","sourcesContent":["import { FullCalendarModule } from \"@fullcalendar/angular\";\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nimport { AppComponent } from \"../app.component\";\r\nimport { CalendarviewComponent } from \"../calendarview/calendarview.component\";\r\nimport { ListviewComponent } from \"../listview/listview.component\";\r\nimport { AllTodosComponent } from \"../all-todos/all-todos.component\";\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common\";\r\nfunction GoogleCalendarIntegrationComponent_button_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r3 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"button\", 2);\r\n    i0.ɵɵlistener(\"click\", function GoogleCalendarIntegrationComponent_button_0_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r3); const ctx_r2 = i0.ɵɵnextContext(); return ctx_r2.handleSignoutClick(); });\r\n    i0.ɵɵtext(1, \"Sign Out\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction GoogleCalendarIntegrationComponent_button_1_Template(rf, ctx) { if (rf & 1) {\r\n    const _r5 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"button\", 3);\r\n    i0.ɵɵlistener(\"click\", function GoogleCalendarIntegrationComponent_button_1_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r5); const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.handleAuthClick(); });\r\n    i0.ɵɵnamespaceSVG();\r\n    i0.ɵɵelementStart(1, \"svg\", 4);\r\n    i0.ɵɵelement(2, \"path\", 5)(3, \"path\", 6)(4, \"path\", 7)(5, \"path\", 8);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtext(6, \" Sign in with Google\\n\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nFullCalendarModule.registerPlugins([\r\n    dayGridPlugin,\r\n    interactionPlugin\r\n]);\r\nexport class GoogleCalendarIntegrationComponent {\r\n    //todos: any[] = this.listUpcomingEvents(); //!!\r\n    //calendarId: String;\r\n    constructor(zone) {\r\n        this.zone = zone;\r\n        this.isSignedIn = false;\r\n        this.pre = '';\r\n    }\r\n    initClient() {\r\n        const updateSigninStatus = this.updateSigninStatus.bind(this);\r\n        gapi.client\r\n            .init({\r\n            apiKey: 'AIzaSyAp_Insk0JjH4oxZ4I0-PLIydIno9jZEZ8',\r\n            clientId: '507232289390-bbo3sbk9t7op0utpakhfc8juman0g025.apps.googleusercontent.com',\r\n            discoveryDocs: [\r\n                'https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest',\r\n            ],\r\n            scope: 'https://www.googleapis.com/auth/calendar',\r\n        })\r\n            .then(() => {\r\n            this.zone.run(() => {\r\n                gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\r\n                updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\r\n            });\r\n        });\r\n        this.listUpcomingEvents();\r\n        /*this.calendarId = gapi.client['calendar'].calendarId;\r\n        this.appendPre(this.calendarId);*/\r\n    }\r\n    updateSigninStatus(isSignedIn) {\r\n        console.log('updateSigninStatus', isSignedIn);\r\n        this.isSignedIn = isSignedIn;\r\n        AppComponent.isSignedIn = isSignedIn;\r\n        if (isSignedIn) {\r\n            this.listUpcomingEvents();\r\n            this.getEvent();\r\n        }\r\n        this.listUpcomingEvents();\r\n    }\r\n    handleAuthClick() {\r\n        gapi.auth2.getAuthInstance().signIn();\r\n    }\r\n    handleSignoutClick() {\r\n        gapi.auth2.getAuthInstance().signOut();\r\n    }\r\n    static addEvent(id, title, description, startDate, dueDate) {\r\n        startDate = startDate.toString() + ':00+02:00';\r\n        dueDate = dueDate.toString() + ':00+02:00';\r\n        let event = {\r\n            id: id,\r\n            summary: title,\r\n            description: description,\r\n            start: {\r\n                dateTime: startDate,\r\n                timeZone: 'Europe/Vienna'\r\n            },\r\n            end: {\r\n                dateTime: dueDate,\r\n                timeZone: 'Europe/Vienna'\r\n            },\r\n        };\r\n        let request = gapi.client['calendar'].events.insert({\r\n            calendarId: 'primary',\r\n            resource: event\r\n        });\r\n        request.execute(function (event) {\r\n        });\r\n    }\r\n    static deleteEvent(id) {\r\n        let request = gapi.client['calendar'].events.delete({\r\n            calendarId: 'primary',\r\n            eventId: id\r\n        });\r\n        request.execute(function () {\r\n        });\r\n    }\r\n    /*sollte static sein*/\r\n    getEvent() {\r\n        const appendPre = this.appendPre.bind(this);\r\n        gapi.client['calendar'].events\r\n            .get({\r\n            calendarId: 'primary',\r\n            eventId: 'nm57o369d553qvo1p09dh3k1e0'\r\n        })\r\n            .then((response) => {\r\n            this.zone.run(() => {\r\n                let e = response.result;\r\n                appendPre(e.summary);\r\n            });\r\n        });\r\n    }\r\n    // editEvent() {\r\n    //   let event: calendar_v3.Schema$Event = gapi.client['calendar'].events.get({\r\n    //     calendarId: 'primary',\r\n    //     eventId: 'u9obmihs83jf0dfb5iot0j2cf0'\r\n    //   })\r\n    //\r\n    //   let request = gapi.client['calendar'].events.update({\r\n    //     calendarId: 'primary',\r\n    //     eventId: 'u9obmihs83jf0dfb5iot0j2cf0',\r\n    //     summary: 'new edit test'\r\n    //   })\r\n    //\r\n    //   request.execute(function() {\r\n    //   });\r\n    // }\r\n    listUpcomingEvents() {\r\n        let events;\r\n        const appendPre = this.appendPre.bind(this);\r\n        gapi.client['calendar'].events\r\n            .list({\r\n            calendarId: 'primary',\r\n            showDeleted: false,\r\n            singleEvents: true,\r\n            orderBy: 'startTime',\r\n        })\r\n            .then((response) => {\r\n            this.zone.run(() => {\r\n                events = response.result.items;\r\n                //appendPre('Upcoming events:');\r\n                if (events.length > 0) {\r\n                    for (const event of events) {\r\n                        CalendarviewComponent.addEvent(event.id, event.summary, event.start.dateTime, event.end.dateTime);\r\n                        ListviewComponent.addEvent(event.id, event.summary, event.start.dateTime, event.end.dateTime);\r\n                        AllTodosComponent.addEvent(event.id, event.summary, event.start.dateTime, event.end.dateTime);\r\n                        let when = event.start.dateTime;\r\n                        if (!when) {\r\n                            when = event.start.date;\r\n                        }\r\n                        //appendPre(event.summary + ' (' + when + ')' + event.end.dateTime);\r\n                    }\r\n                }\r\n                else {\r\n                    //appendPre('No upcoming events found.');\r\n                }\r\n            });\r\n        });\r\n    }\r\n    appendPre(text) {\r\n        this.pre += text + '\\n';\r\n    }\r\n    loadGapi() {\r\n        const script = document.createElement('script');\r\n        script.src = 'https://apis.google.com/js/api.js';\r\n        window.document.body.appendChild(script);\r\n        return new Promise((resolve, reject) => {\r\n            script.addEventListener('error', (error) => reject(error));\r\n            script.addEventListener('load', () => resolve());\r\n        });\r\n    }\r\n    async ngOnInit() {\r\n        await this.loadGapi();\r\n        gapi.load('client:auth2', this.initClient.bind(this));\r\n    }\r\n}\r\nGoogleCalendarIntegrationComponent.ɵfac = function GoogleCalendarIntegrationComponent_Factory(t) { return new (t || GoogleCalendarIntegrationComponent)(i0.ɵɵdirectiveInject(i0.NgZone)); };\r\nGoogleCalendarIntegrationComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: GoogleCalendarIntegrationComponent, selectors: [[\"app-google-calendar-integration\"]], decls: 4, vars: 3, consts: [[3, \"click\", 4, \"ngIf\"], [\"style\", \"margin-top: 500px; \", 3, \"click\", 4, \"ngIf\"], [3, \"click\"], [2, \"margin-top\", \"500px\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"x\", \"0px\", \"y\", \"0px\", \"width\", \"25\", \"height\", \"25\", \"viewBox\", \"0 0 48 48\", 2, \"fill\", \"#000000\"], [\"fill\", \"#FFC107\", \"d\", \"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z\"], [\"fill\", \"#FF3D00\", \"d\", \"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z\"], [\"fill\", \"#4CAF50\", \"d\", \"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z\"], [\"fill\", \"#1976D2\", \"d\", \"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z\"]], template: function GoogleCalendarIntegrationComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, GoogleCalendarIntegrationComponent_button_0_Template, 2, 0, \"button\", 0);\r\n        i0.ɵɵtemplate(1, GoogleCalendarIntegrationComponent_button_1_Template, 7, 0, \"button\", 1);\r\n        i0.ɵɵelementStart(2, \"pre\");\r\n        i0.ɵɵtext(3);\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isSignedIn);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSignedIn);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate1(\"\", ctx.pre, \" \");\r\n    } }, directives: [i1.NgIf], styles: [\"button[_ngcontent-%COMP%] {\\n  padding: 4px 10px;\\n  margin: 5px;\\n  border: 2px;\\n  border-radius: 4px;\\n}\\n\\ndiv[_ngcontent-%COMP%] {\\n  margin: auto;\\n  width: 50%;\\n  align-content: center;\\n}\\n\\nfull-calendar[_ngcontent-%COMP%] {\\n  background-color: white;\\n  padding: 10px 20px;\\n  border-radius: 10px;\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvb2dsZS1jYWxlbmRhci1pbnRlZ3JhdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtBQUNGOztBQUVBO0VBQ0UsWUFBQTtFQUNBLFVBQUE7RUFDQSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UsdUJBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EscUJBQUE7QUFDRiIsImZpbGUiOiJnb29nbGUtY2FsZW5kYXItaW50ZWdyYXRpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b24ge1xyXG4gIHBhZGRpbmc6IDRweCAxMHB4O1xyXG4gIG1hcmdpbjogNXB4O1xyXG4gIGJvcmRlcjogMnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxufVxyXG5cclxuZGl2IHtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgd2lkdGg6IDUwJTtcclxuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbmZ1bGwtY2FsZW5kYXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5cclxuXHJcbiJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}